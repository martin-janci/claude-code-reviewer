services:
  reviewer:
    image: registry.rlt.sk/claude-code-reviewer:latest
    # build: .
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - WEBHOOK_SECRET=${WEBHOOK_SECRET:-}
      - CLAUDE_AUTO_UPDATE=${CLAUDE_AUTO_UPDATE:-false}
    volumes:
      - claude-auth:/home/node/.claude
      - ./.claude/skills:/home/node/.claude/skills:ro
      - ./config.yaml:/app/config.yaml:ro
      - reviewer-data:/app/data
    ports:
      - "3000:3000"
      - "3001:3001"
    restart: unless-stopped

volumes:
  claude-auth:
  reviewer-data:
